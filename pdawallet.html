<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solana Wallet Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: Arial, sans-serif;
    background: #0a0a0a;
    color: #fff;
    padding: 20px;
  }
  h1 { text-align: center; }
  #balanceBox {
    background: #111;
    padding: 15px;
    margin-bottom: 20px;
    border: 1px solid #333;
    border-radius: 8px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  table th, table td {
    border: 1px solid #444;
    padding: 8px;
    text-align: left;
  }
  th { background: #222; }
</style>
</head>
<body>

<h1>Solana Wallet Balance Tracker</h1>

<div id="balanceBox">
  <h2>Current Balance:</h2>
  <p id="balance">Loading...</p>
</div>

<h2>Balance Change Ledger</h2>
<table>
  <thead>
    <tr>
      <th>Timestamp</th>
      <th>Old Balance (SOL)</th>
      <th>New Balance (SOL)</th>
      <th>Change (SOL)</th>
    </tr>
  </thead>
  <tbody id="ledgerBody"></tbody>
</table>

<script>

// === CONFIG ===
const WALLET = "7qeCuMQUVhxfncxddC3A1SYQ4JnDhxJBBcrxhKDzfbs";
const RPC = "https://mainnet.helius-rpc.com/?api-key=d616d97c-62dc-4962-b859-54861377cd5b";  // Public RPC
let lastBalance = null;

// === GET BALANCE FROM SOLANA RPC ===
async function getBalance() {
  const body = {
    jsonrpc: "2.0",
    id: 1,
    method: "getBalance",
    params: [WALLET]
  };

  const res = await fetch(RPC, {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(body)
  });

  const data = await res.json();
  return data.result.value / 1_000_000_000;  // Convert lamports â†’ SOL
}

// === UPDATE UI ===
async function updateBalance() {
  try {
    const newBal = await getBalance();

    document.getElementById("balance").innerText =
      newBal.toFixed(4) + " SOL";

    // === If it's the first check, set initial balance only ===
    if (lastBalance === null) {
      lastBalance = newBal;
      return;
    }

    // === Detect changes ===
    if (newBal !== lastBalance) {
      const change = (newBal - lastBalance).toFixed(4);

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${new Date().toLocaleString()}</td>
        <td>${lastBalance.toFixed(4)}</td>
        <td>${newBal.toFixed(4)}</td>
        <td>${change}</td>
      `;
      document.getElementById("ledgerBody").prepend(row);

      lastBalance = newBal;
    }

  } catch (err) {
    document.getElementById("balance").innerText = "Error fetching balance";
    console.error(err);
  }
}

// === RUN EVERY 10 SECONDS ===
updateBalance();
setInterval(updateBalance, 10_000);

</script>
</body>
</html>
