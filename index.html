<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Phantom Connect Test</title>
<style>
body{
  background:#000;color:#0f0;font-family:Courier,monospace;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  height:100vh;text-align:center
}
button{margin-top:1rem;padding:.6rem 1rem;border:1px solid #0f0;background:#000;color:#0f0;border-radius:6px}
button:hover{background:#0f0;color:#000;cursor:pointer}
</style>
</head>
<body>
<h2>🔌 Phantom Wallet Connection Test</h2>
<p id="status">Waiting…</p>
<button id="connectBtn">Connect Phantom</button>

<script>
const connectBtn=document.getElementById("connectBtn");
const statusEl=document.getElementById("status");

async function getProvider(){
  if("solana" in window){
    const provider=window.solana;
    if(provider.isPhantom) return provider;
  }
  throw new Error("Phantom wallet not found");
}

connectBtn.onclick=async()=>{
  try{
    const provider=await getProvider();
    const resp=await provider.connect({onlyIfTrusted:false});
    statusEl.textContent="✅ Connected: "+resp.publicKey.toString();
  }catch(e){
    console.error(e);
    statusEl.textContent="❌ "+e.message;
  }
};

// auto-detect on load
window.addEventListener("load",()=>{
  if("solana" in window){
    if(window.solana.isPhantom){
      statusEl.textContent="🟢 Phantom detected — click Connect.";
    }else{
      statusEl.textContent="⚠️ Solana wallet found, but not Phantom.";
    }
  }else{
    statusEl.innerHTML='❌ No Phantom wallet detected. <a href="https://phantom.app/download" target="_blank" style="color:#0f0">Install here</a>.';
  }
});
</script>
</body>
</html>
